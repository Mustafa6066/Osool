# ═══════════════════════════════════════════════════════════════
# Osool Production Environment Configuration
# ═══════════════════════════════════════════════════════════════
# CRITICAL: Never commit actual .env.production to version control
# Use secure secret management (AWS Secrets Manager / Azure Key Vault / GCP Secret Manager)
# ═══════════════════════════════════════════════════════════════

# Environment Mode
ENVIRONMENT=production

# ═══════════════════════════════════════════════════════════════
# DATABASE CONFIGURATION
# ═══════════════════════════════════════════════════════════════

# PostgreSQL Connection (Production)
DATABASE_URL=postgresql://osool_prod:STRONG_PASSWORD_HERE@db:5432/osool_production

# Database Connection Pool
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10

# ═══════════════════════════════════════════════════════════════
# CRITICAL SECURITY KEYS
# ═══════════════════════════════════════════════════════════════

# Wallet Encryption Key (CRITICAL - Store in KMS!)
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
WALLET_ENCRYPTION_KEY=

# JWT Secret for Access Tokens
# Generate with: openssl rand -hex 32
JWT_SECRET_KEY=

# Admin API Key for Protected Endpoints
# Generate with: openssl rand -hex 32
ADMIN_API_KEY=

# ═══════════════════════════════════════════════════════════════
# BLOCKCHAIN CONFIGURATION (Production)
# ═══════════════════════════════════════════════════════════════

# Simulation Mode - MUST BE FALSE IN PRODUCTION
BLOCKCHAIN_SIMULATION_MODE=false

# Polygon Mainnet Configuration
POLYGON_RPC_URL=https://polygon-mainnet.g.alchemy.com/v2/YOUR_ALCHEMY_KEY
CHAIN_ID=137

# Contract Addresses (Update after deployment)
OSOOL_REGISTRY_ADDRESS=0xYourDeployedRegistryAddress
OSOOL_AMM_ADDRESS=0xYourDeployedAMMAddress
OSOOL_OEGP_ADDRESS=0xOEGPStablecoinAddress

# Admin Wallet (Use Gnosis Safe Multisig!)
ADMIN_WALLET_ADDRESS=0xYourGnosisSafeAddress
# CRITICAL: Load from KMS, NOT from .env in production
PRIVATE_KEY=

# ═══════════════════════════════════════════════════════════════
# AI & ML SERVICES
# ═══════════════════════════════════════════════════════════════

# OpenAI API Key
OPENAI_API_KEY=sk-...

# Gemini API Key (Optional fallback)
GEMINI_API_KEY=

# MLOps Inference Endpoint
MLOPS_INFERENCE_URL=http://localhost:8080/v1/models/xgboost:predict

# ═══════════════════════════════════════════════════════════════
# PAYMENT GATEWAY (Paymob)
# ═══════════════════════════════════════════════════════════════

PAYMOB_API_KEY=your_production_paymob_api_key
PAYMOB_INTEGRATION_ID=your_production_integration_id
PAYMOB_WEBHOOK_SECRET=your_production_webhook_secret
PAYMOB_HMAC_SECRET=your_production_hmac_secret

# ═══════════════════════════════════════════════════════════════
# COMMUNICATION SERVICES
# ═══════════════════════════════════════════════════════════════

# Twilio (Phone OTP)
TWILIO_ACCOUNT_SID=your_production_account_sid
TWILIO_AUTH_TOKEN=your_production_auth_token
TWILIO_PHONE_NUMBER=+1234567890

# SendGrid (Email)
SENDGRID_API_KEY=SG.production_key_here
FROM_EMAIL=noreply@osool.com

# ═══════════════════════════════════════════════════════════════
# OAUTH PROVIDERS
# ═══════════════════════════════════════════════════════════════

# Google OAuth
GOOGLE_CLIENT_ID=your_production_client_id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your_production_client_secret

# ═══════════════════════════════════════════════════════════════
# CACHING & SESSION MANAGEMENT
# ═══════════════════════════════════════════════════════════════

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_URL=redis://redis:6379
REDIS_PASSWORD=your_redis_password_here

# Session Configuration
SESSION_TIMEOUT=3600  # 1 hour

# ═══════════════════════════════════════════════════════════════
# MONITORING & OBSERVABILITY
# ═══════════════════════════════════════════════════════════════

# Sentry (Error Tracking)
SENTRY_DSN=https://your_production_sentry_dsn@sentry.io/project_id

# Log Level
LOG_LEVEL=info

# ═══════════════════════════════════════════════════════════════
# APPLICATION SERVER CONFIGURATION
# ═══════════════════════════════════════════════════════════════

# Server Settings
PORT=8000
WORKERS=4  # 2 * CPU cores
TIMEOUT=120

# Frontend URL (CORS)
FRONTEND_URL=https://osool.com

# API Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60

# ═══════════════════════════════════════════════════════════════
# THIRDWEB (Frontend Web3)
# ═══════════════════════════════════════════════════════════════

NEXT_PUBLIC_THIRDWEB_CLIENT_ID=your_production_thirdweb_client_id
NEXT_PUBLIC_API_URL=https://api.osool.com

# ═══════════════════════════════════════════════════════════════
# BLOCK EXPLORER API KEYS
# ═══════════════════════════════════════════════════════════════

POLYGONSCAN_API_KEY=your_production_polygonscan_api_key

# ═══════════════════════════════════════════════════════════════
# DEPLOYMENT NOTES
# ═══════════════════════════════════════════════════════════════

# 1. Generate all secret keys using secure methods (see comments above)
# 2. Store WALLET_ENCRYPTION_KEY in AWS KMS / Azure Key Vault / GCP Secret Manager
# 3. Use Gnosis Safe multisig for ADMIN_WALLET_ADDRESS (not EOA!)
# 4. Deploy contracts to Polygon mainnet AFTER audit
# 5. Verify all contract addresses on PolygonScan
# 6. Enable monitoring alerts (Sentry, Grafana, Datadog)
# 7. Test all integrations in staging first
# 8. Set up automated backups for database
# 9. Configure WAF and DDoS protection
# 10. Document incident response procedures

# ═══════════════════════════════════════════════════════════════
# SECURITY CHECKLIST
# ═══════════════════════════════════════════════════════════════

# [ ] All secrets loaded from KMS (not plaintext .env)
# [ ] SSL/TLS certificates valid and auto-renewing
# [ ] CORS configured for production domain only
# [ ] Rate limiting enabled
# [ ] Database credentials rotated from default
# [ ] Admin API key restricted to internal services
# [ ] Blockchain contracts ownership transferred to multisig
# [ ] Smart contracts professionally audited
# [ ] Monitoring alerts configured
# [ ] Backup and disaster recovery tested
