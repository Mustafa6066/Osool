<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฃุตูู - Osool | ุงูุฐูุงุก ุงูุนูุงุฑู ุงููุตุฑู</title>

    <!-- Premium Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Styles -->
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/blockchain.css">
</head>

<body>

    <!-- Ambient Blobs (Background) -->
    <div class="blob"
        style="top: -10%; left: -10%; width: 50vw; height: 50vw; background: radial-gradient(circle, rgba(212,175,55,0.2) 0%, transparent 70%);">
    </div>
    <div class="blob"
        style="bottom: -10%; right: -10%; width: 60vw; height: 60vw; background: radial-gradient(circle, rgba(15,23,42,0.1) 0%, transparent 70%); animation-delay: -5s;">
    </div>

    <!-- MAIN CONTENT -->
    <main class="container-fluid" style="padding-top: 80px; padding-bottom: 120px;">

        <!-- 
           HERO SECTION: THE AI CONSOLE 
           A 3D tilted glass panel that acts as the central hub.
        -->
        <section class="hero-console scene-3d"
            style="min-height: 80vh; display: flex; align-items: center; justify-content: center; position: relative;">
            <!-- Three.js Canvas Container -->
            <div id="hero-canvas-container"
                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none;">
            </div>

            <div class="card-3d glass-panel"
                style="width: 100%; max-width: 1100px; padding: 60px; position: relative; overflow: hidden; z-index: 1;">

                <!-- Inner Light Shimmer -->
                <div class="shimmer-effect"
                    style="position: absolute; top:0; left:0; width:100%; height:100%; z-index:0; pointer-events:none;">
                </div>

                <div style="position: relative; z-index: 1; text-align: center;">
                    <!-- Badge -->
                    <div
                        style="display: inline-flex; align-items: center; gap: 8px; padding: 8px 16px; background: rgba(15,23,42,0.05); border-radius: 99px; border: 1px solid rgba(15,23,42,0.1); margin-bottom: 24px;">
                        <span
                            style="display: block; width: 8px; height: 8px; background: var(--color-success); border-radius: 50%; box-shadow: 0 0 10px var(--color-success);"></span>
                        <span
                            style="font-family: var(--font-mono); font-size: 0.85rem; color: var(--color-trust-mid);">ELITE
                            ADVISOR ONLINE</span>
                        <!-- Connect Wallet Button -->
                        <button id="connectWalletBtn" class="btn-connect-wallet" onclick="connectWallet()"
                            style="margin-right: 16px;">
                            <i class="fab fa-ethereum wallet-icon"></i>
                            <span id="walletBtnText">ุฑุจุท ุงููุญูุธุฉ</span>
                        </button>
                    </div>

                    <h1 class="hero-title">
                        ูุณุชูุจูู ุงูุนูุงุฑู <br>
                        <span class="text-gradient-gold">ุจุฐูุงุก ุงุตุทูุงุนู</span> ูุตุฑู
                    </h1>

                    <p
                        style="font-size: 1.25rem; color: var(--color-trust-soft); max-width: 600px; margin: 0 auto 48px;">
                        ุฃูู ููุตุฉ ุนูุงุฑูุฉ ูู ูุตุฑ ุชุณุชุฎุฏู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงูุชูููุฏู ููุณุงุนุฏุชู ูู ุงุชุฎุงุฐ ูุฑุงุฑุงุช ุงุณุชุซูุงุฑูุฉ
                        ุฏูููุฉ.
                    </p>

                    <!-- Interaction Row -->
                    <div style="display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;">
                        <button class="btn btn-gold-glow" onclick="openChat()">
                            <i class="fas fa-sparkles" style="margin-left: 8px;"></i>
                            ูุณุชุดุงุฑ ุงููุฎุจุฉ (AI)
                        </button>
                        <button class="btn btn-primary-glass">
                            ุงุณุชูุดู ุงููุฑุต
                        </button>
                    </div>

                    <!-- Mood-Based AI Search -->
                    <div class="mood-selector"
                        style="margin-top: 40px; max-width: 500px; margin-left: auto; margin-right: auto;">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <span style="font-size: 0.9rem; color: var(--color-trust-soft);"><i class="fas fa-home"></i>
                                ุณูู ุนุงุฆูู</span>
                            <span style="font-weight: 600; color: var(--color-ai-pulse);" id="moodLabel">ูุชูุงุฒู</span>
                            <span style="font-size: 0.9rem; color: var(--color-trust-soft);"><i
                                    class="fas fa-chart-line"></i> ุงุณุชุซูุงุฑ</span>
                        </div>
                        <input type="range" class="mood-slider" id="moodSlider" min="0" max="100" value="50"
                            oninput="updateMood(this.value)">
                        <p
                            style="font-size: 0.8rem; color: var(--color-trust-soft); text-align: center; margin-top: 8px;">
                            ุญุฑู ุงููุคุดุฑ ูุชุฎุตูุต ูุชุงุฆุฌ ุงูุจุญุซ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู
                        </p>
                    </div>
                </div>

                <!-- Floating Stats Cards (Decorative) -->
                <div class="card-3d glass-panel"
                    style="position: absolute; top: 15%; right: 5%; width: 220px; padding: 20px; transform: rotate(5deg) scale(0.9);">
                    <div style="font-size: 0.8rem; color: var(--color-trust-soft);">ูุชูุณุท ุงูุนุงุฆุฏ (ุงูุชุฌูุน)</div>
                    <div style="font-size: 1.5rem; font-weight: 700; color: var(--color-success);">+15.4%</div>
                    <div
                        style="height: 4px; background: #e2e8f0; border-radius: 2px; margin-top: 8px; overflow: hidden;">
                        <div style="width: 70%; height: 100%; background: var(--color-success);"></div>
                    </div>
                </div>

                <div class="card-3d glass-panel"
                    style="position: absolute; bottom: 15%; left: 5%; width: 200px; padding: 20px; transform: rotate(-5deg) scale(0.9);">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <div style="width: 40px; height: 40px; background: #e2e8f0; border-radius: 50%;"></div>
                        <div>
                            <div style="font-size: 0.8rem; font-weight: 700;">ุนููู ุณุนูุฏ</div>
                            <div style="font-size: 0.7rem; color: var(--color-trust-soft);">ููุฐ 5 ุฏูุงุฆู</div>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- 
           FEATURED PROPERTIES: HOLOGRAPHIC GRID 
        -->
        <section class="container scene-3d">
            <div style="display: flex; justify-content: space-between; align-items: end; margin-bottom: 40px;">
                <div>
                    <h2 style="font-size: 2.5rem; margin-bottom: 8px;">ูุฑุต ุงุณุชุซูุงุฆูุฉ</h2>
                    <p style="color: var(--color-trust-soft);">ุชู ุงุฎุชูุงุฑูุง ุจูุงุณุทุฉ ุฎูุงุฑุฒููุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู</p>
                </div>
                <button class="btn btn-primary-glass" style="font-size: 0.9rem;">ุนุฑุถ ุงููู</button>
            </div>

            <div id="propertyGrid"
                style="display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 32px;">
                <!-- Card Template (Will be populated by JS, but putting one static for structure) -->
                <div class="card-3d glass-panel" style="padding: 16px; cursor: pointer;">
                    <div
                        style="height: 240px; background: #ccc; border-radius: 16px; margin-bottom: 16px; position: relative; overflow: hidden;">
                        <img src="https://images.unsplash.com/photo-1600596542815-e32870110274?auto=format&fit=crop&w=800&q=80"
                            style="width: 100%; height: 100%; object-fit: cover;" alt="Villa">
                        <div
                            style="position: absolute; top: 12px; right: 12px; background: rgba(0,0,0,0.6); color: white; padding: 4px 12px; border-radius: 99px; font-size: 0.8rem; backdrop-filter: blur(4px);">
                            ููุตู ุจู
                        </div>
                    </div>
                    <h3 style="font-size: 1.25rem; margin-bottom: 4px;">ูููุง ุณูุฏูู ุฅูุณุช</h3>
                    <div style="color: var(--color-gold-text); font-weight: 600; font-family: var(--font-mono);">EGP
                        8,500,000</div>
                    <div
                        style="margin-top: 12px; display: flex; gap: 12px; font-size: 0.85rem; color: var(--color-trust-soft);">
                        <span><i class="fas fa-bed"></i> 4</span>
                        <span><i class="fas fa-bath"></i> 3</span>
                        <span><i class="fas fa-ruler-combined"></i> 320mยฒ</span>
                    </div>
                </div>

                <div class="card-3d glass-panel" style="padding: 16px; cursor: pointer;">
                    <div
                        style="height: 240px; background: #ccc; border-radius: 16px; margin-bottom: 16px; position: relative; overflow: hidden;">
                        <img src="https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?auto=format&fit=crop&w=800&q=80"
                            style="width: 100%; height: 100%; object-fit: cover;" alt="Apartment">
                    </div>
                    <h3 style="font-size: 1.25rem; margin-bottom: 4px;">ุดูุฉ ุจุงูู ูููุฒ</h3>
                    <div style="color: var(--color-gold-text); font-weight: 600; font-family: var(--font-mono);">EGP
                        4,200,000</div>
                    <div
                        style="margin-top: 12px; display: flex; gap: 12px; font-size: 0.85rem; color: var(--color-trust-soft);">
                        <span><i class="fas fa-bed"></i> 2</span>
                        <span><i class="fas fa-bath"></i> 2</span>
                        <span><i class="fas fa-ruler-combined"></i> 145mยฒ</span>
                    </div>
                </div>
                <div class="card-3d glass-panel" style="padding: 16px; cursor: pointer;">
                    <div
                        style="height: 240px; background: #ccc; border-radius: 16px; margin-bottom: 16px; position: relative; overflow: hidden;">
                        <img src="https://images.unsplash.com/photo-1512917774080-9991f1c4c750?auto=format&fit=crop&w=800&q=80"
                            style="width: 100%; height: 100%; object-fit: cover;" alt="Apartment">
                    </div>
                    <h3 style="font-size: 1.25rem; margin-bottom: 4px;">ุฏูุจููุณ ุงูุดูุฎ ุฒุงูุฏ</h3>
                    <div style="color: var(--color-gold-text); font-weight: 600; font-family: var(--font-mono);">EGP
                        6,100,000</div>
                    <div
                        style="margin-top: 12px; display: flex; gap: 12px; font-size: 0.85rem; color: var(--color-trust-soft);">
                        <span><i class="fas fa-bed"></i> 3</span>
                        <span><i class="fas fa-bath"></i> 3</span>
                        <span><i class="fas fa-ruler-combined"></i> 210mยฒ</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- 
           MARKET ANALYTICS SECTION 
           Live data visualization with luxurious presentation.
        -->
        <section class="container scene-3d" style="margin-top: 80px; margin-bottom: 80px;">
            <div class="glass-panel" style="padding: 40px; border-radius: 24px; position: relative; overflow: hidden;">
                <!-- Background shimmers -->
                <div class="blob"
                    style="width: 300px; height: 300px; background: radial-gradient(circle, rgba(16,185,129,0.1) 0%, transparent 70%); top: -50px; right: -50px;">
                </div>

                <h2 style="font-size: 2rem; margin-bottom: 8px;">ูุธุฑุฉ ุนูู ุงูุณูู <span
                        style="font-size: 1rem; vertical-align: middle; background: rgba(16,185,129,0.1); color: var(--color-success); padding: 4px 12px; border-radius: 99px;">ุชุญุฏูุซ
                        ูุจุงุดุฑ</span></h2>
                <p style="color: var(--color-trust-soft); margin-bottom: 32px;">ุชุญูููุงุช ูุฏุนููุฉ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุฃุณุนุงุฑ
                    ุงูุนูุงุฑุงุช ูู ุงูููุงุทู ุงูุฃูุซุฑ ุทูุจุงู.</p>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 32px;">
                    <!-- Chart Container -->
                    <div
                        style="background: rgba(255,255,255,0.5); border-radius: 16px; padding: 24px; min-height: 300px;">
                        <canvas id="roiChart"></canvas>
                    </div>

                    <!-- Stats / Text -->
                    <div style="display: flex; flex-direction: column; justify-content: center;">
                        <div class="stat-card glass-panel"
                            style="padding: 20px; margin-bottom: 16px; display: flex; align-items: center; justify-content: space-between;">
                            <div>
                                <div style="font-size: 0.9rem; color: var(--color-trust-soft);">ูุชูุณุท ุงูููู ุงูุณููู</div>
                                <div style="font-size: 1.5rem; font-weight: 700; color: var(--color-trust-deep);">+22.5%
                                </div>
                            </div>
                            <i class="fas fa-chart-line" style="font-size: 24px; color: var(--color-gold-text);"></i>
                        </div>

                        <div class="stat-card glass-panel"
                            style="padding: 20px; display: flex; align-items: center; justify-content: space-between;">
                            <div>
                                <div style="font-size: 0.9rem; color: var(--color-trust-soft);">ุฃูุถู ููุทูุฉ ููุงุณุชุซูุงุฑ
                                </div>
                                <div style="font-size: 1.5rem; font-weight: 700; color: var(--color-trust-deep);">
                                    ุงูุนุงุตูุฉ ุงูุฅุฏุงุฑูุฉ</div>
                            </div>
                            <i class="fas fa-city" style="font-size: 24px; color: var(--color-trust-mid);"></i>
                        </div>

                        <button class="btn btn-gold-glow" style="margin-top: 24px; width: fit-content;">
                            ุชุญููู ุงูุชูุฑูุฑ ุงููุงูู
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- 
           SUBSCRIPTION PRICING SECTION 
           Tiered plans for different user needs.
        -->
        <section id="pricing" class="container scene-3d" style="margin-top: 80px; margin-bottom: 80px;">
            <div style="text-align: center; margin-bottom: 48px;">
                <h2 style="font-size: 2.5rem; margin-bottom: 8px;">ุงุฎุชุฑ ุฎุทุชู</h2>
                <p style="color: var(--color-trust-soft); max-width: 500px; margin: 0 auto;">ุงุณุชุซูุฑ ูู ูุณุชูุจูู ุงูุนูุงุฑู
                    ูุน ุฎุฏูุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู</p>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 24px;">
                <!-- Explorer Plan -->
                <div class="card-3d glass-panel" style="padding: 32px; text-align: center; position: relative;">
                    <div
                        style="font-size: 1.2rem; font-weight: 600; color: var(--color-trust-mid); margin-bottom: 8px;">
                        Explorer</div>
                    <div
                        style="font-size: 2.5rem; font-weight: 700; color: var(--color-trust-deep); margin-bottom: 24px;">
                        EGP 299<span style="font-size: 1rem; font-weight: 400;">/ุดูุฑ</span>
                    </div>
                    <ul
                        style="list-style: none; padding: 0; margin-bottom: 32px; text-align: right; font-size: 0.9rem; color: var(--color-trust-soft);">
                        <li style="margin-bottom: 12px;"><i class="fas fa-check"
                                style="color: var(--color-success); margin-left: 8px;"></i> 10 ุงุณุชุดุงุฑุงุช AI ุดูุฑูุงู</li>
                        <li style="margin-bottom: 12px;"><i class="fas fa-check"
                                style="color: var(--color-success); margin-left: 8px;"></i> ุชุญูููุงุช ุงูุณูู ุงูุฃุณุงุณูุฉ</li>
                        <li style="margin-bottom: 12px;"><i class="fas fa-check"
                                style="color: var(--color-success); margin-left: 8px;"></i> ุจุญุซ ุฐูู ุจุงูุชูุถููุงุช</li>
                        <li style="margin-bottom: 12px; opacity: 0.5;"><i class="fas fa-times"
                                style="color: var(--color-trust-soft); margin-left: 8px;"></i> ุชูุงุฑูุฑ ุงุณุชุซูุงุฑูุฉ</li>
                    </ul>
                    <button class="btn btn-primary-glass" style="width: 100%;">ุงุจุฏุฃ ุงูุขู</button>
                </div>

                <!-- Professional Plan (Featured) -->
                <div class="card-3d glass-panel"
                    style="padding: 32px; text-align: center; position: relative; border: 2px solid var(--color-gold-rich); transform: scale(1.05);">
                    <div
                        style="position: absolute; top: -12px; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, #d4af37, #f5d77a); color: #1a1a1a; padding: 4px 16px; border-radius: 99px; font-size: 0.75rem; font-weight: 700;">
                        ุงูุฃูุซุฑ ุทูุจุงู</div>
                    <div
                        style="font-size: 1.2rem; font-weight: 600; color: var(--color-gold-text); margin-bottom: 8px;">
                        Professional</div>
                    <div
                        style="font-size: 2.5rem; font-weight: 700; color: var(--color-trust-deep); margin-bottom: 24px;">
                        EGP 999<span style="font-size: 1rem; font-weight: 400;">/ุดูุฑ</span>
                    </div>
                    <ul
                        style="list-style: none; padding: 0; margin-bottom: 32px; text-align: right; font-size: 0.9rem; color: var(--color-trust-soft);">
                        <li style="margin-bottom: 12px;"><i class="fas fa-check"
                                style="color: var(--color-success); margin-left: 8px;"></i> ุงุณุชุดุงุฑุงุช AI ุบูุฑ ูุญุฏูุฏุฉ</li>
                        <li style="margin-bottom: 12px;"><i class="fas fa-check"
                                style="color: var(--color-success); margin-left: 8px;"></i> ุชุญูููุงุช ุงุณุชุซูุงุฑูุฉ ูุชูุฏูุฉ
                        </li>
                        <li style="margin-bottom: 12px;"><i class="fas fa-check"
                                style="color: var(--color-success); margin-left: 8px;"></i> Virtual Staging (5 ุนูุงุฑุงุช)
                        </li>
                        <li style="margin-bottom: 12px;"><i class="fas fa-check"
                                style="color: var(--color-success); margin-left: 8px;"></i> ุฏุนู ุฃููููุฉ</li>
                    </ul>
                    <button class="btn btn-gold-glow" style="width: 100%;">ุงุจุฏุฃ ุงูุขู</button>
                </div>

                <!-- Elite Plan -->
                <div class="card-3d glass-panel"
                    style="padding: 32px; text-align: center; position: relative; background: linear-gradient(135deg, rgba(15,23,42,0.95), rgba(30,41,59,0.9)); color: white;">
                    <div style="font-size: 1.2rem; font-weight: 600; color: rgba(255,255,255,0.7); margin-bottom: 8px;">
                        Elite</div>
                    <div style="font-size: 2.5rem; font-weight: 700; color: white; margin-bottom: 24px;">
                        EGP 2,999<span style="font-size: 1rem; font-weight: 400;">/ุดูุฑ</span>
                    </div>
                    <ul
                        style="list-style: none; padding: 0; margin-bottom: 32px; text-align: right; font-size: 0.9rem; color: rgba(255,255,255,0.7);">
                        <li style="margin-bottom: 12px;"><i class="fas fa-crown"
                                style="color: #d4af37; margin-left: 8px;"></i> AI Concierge ุดุฎุตู</li>
                        <li style="margin-bottom: 12px;"><i class="fas fa-crown"
                                style="color: #d4af37; margin-left: 8px;"></i> ุงุณุชุฑุงุชูุฌูุงุช ุงุณุชุซูุงุฑ ูุฎุตุตุฉ</li>
                        <li style="margin-bottom: 12px;"><i class="fas fa-crown"
                                style="color: #d4af37; margin-left: 8px;"></i> ุงูุชุญูู ุนุจุฑ Blockchain</li>
                        <li style="margin-bottom: 12px;"><i class="fas fa-crown"
                                style="color: #d4af37; margin-left: 8px;"></i> ุตููุงุช Off-Market ุญุตุฑูุฉ</li>
                    </ul>
                    <button class="btn"
                        style="width: 100%; background: linear-gradient(135deg, #d4af37, #f5d77a); color: #1a1a1a; font-weight: 700;">ุชูุงุตู
                        ูุนูุง</button>
                </div>
            </div>
        </section>

        <!-- 
           ROI CALCULATOR SECTION 
           Interactive investment projections.
        -->
        <section id="roi-calculator" class="container scene-3d" style="margin-top: 80px; margin-bottom: 80px;">
            <div class="glass-panel" style="padding: 40px; border-radius: 24px;">
                <h2 style="font-size: 2rem; margin-bottom: 8px;">ุญุงุณุจุฉ ุงูุนุงุฆุฏ ุงูุงุณุชุซูุงุฑู <span
                        style="font-size: 0.8rem; background: linear-gradient(135deg, #8b5cf6, #6366f1); color: white; padding: 4px 12px; border-radius: 99px; vertical-align: middle;">AI-Powered</span>
                </h2>
                <p style="color: var(--color-trust-soft); margin-bottom: 32px;">ุงุญุณุจ ุงูุนุงุฆุฏ ุงููุชููุน ุนูู ุงุณุชุซูุงุฑู ุงูุนูุงุฑู
                </p>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 32px;">
                    <!-- Inputs -->
                    <div>
                        <div style="margin-bottom: 20px;">
                            <label
                                style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--color-trust-mid);">ุณุนุฑ
                                ุงูุนูุงุฑ (EGP)</label>
                            <input id="roiPurchasePrice" type="number" value="5000000" oninput="calculateROI()"
                                style="width: 100%; padding: 14px; border-radius: 12px; border: 1px solid rgba(0,0,0,0.1); background: rgba(255,255,255,0.6); font-size: 1rem; font-family: var(--font-mono);">
                        </div>
                        <div style="margin-bottom: 20px;">
                            <label
                                style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--color-trust-mid);">ุงูุฅูุฌุงุฑ
                                ุงูุดูุฑู ุงููุชููุน (EGP)</label>
                            <input id="roiMonthlyRent" type="number" value="25000" oninput="calculateROI()"
                                style="width: 100%; padding: 14px; border-radius: 12px; border: 1px solid rgba(0,0,0,0.1); background: rgba(255,255,255,0.6); font-size: 1rem; font-family: var(--font-mono);">
                        </div>
                        <div style="margin-bottom: 20px;">
                            <label
                                style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--color-trust-mid);">ูุณุจุฉ
                                ุงูุฒูุงุฏุฉ ุงูุณูููุฉ (%)</label>
                            <input id="roiAppreciation" type="number" value="15" oninput="calculateROI()"
                                style="width: 100%; padding: 14px; border-radius: 12px; border: 1px solid rgba(0,0,0,0.1); background: rgba(255,255,255,0.6); font-size: 1rem; font-family: var(--font-mono);">
                        </div>
                    </div>

                    <!-- Result -->
                    <div id="roiResult"
                        style="background: rgba(255,255,255,0.5); border-radius: 16px; padding: 24px; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;">
                        <div style="font-size: 0.9rem; color: var(--color-trust-soft);">ุฃุฏุฎู ุงูุจูุงูุงุช ูุญุณุงุจ ุงูุนุงุฆุฏ</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 
           AI VALUATION SECTION (XGBoost + GPT-4o Hybrid)
           State-of-the-art property valuation with AI reasoning.
        -->
        <section id="ai-valuation" class="container scene-3d" style="margin-top: 80px; margin-bottom: 80px;">
            <div class="glass-panel" style="padding: 40px; border-radius: 24px; position: relative; overflow: hidden;">
                <!-- Background Shimmer -->
                <div class="blob"
                    style="width: 400px; height: 400px; background: radial-gradient(circle, rgba(16,185,129,0.15) 0%, transparent 70%); top: -100px; left: -100px;">
                </div>

                <h2 style="font-size: 2rem; margin-bottom: 8px;">
                    <i class="fas fa-brain" style="color: var(--color-gold-text);"></i>
                    ุชูููู ุงูุนูุงุฑ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู
                    <span
                        style="font-size: 0.8rem; background: linear-gradient(135deg, #10b981, #059669); color: white; padding: 4px 12px; border-radius: 99px; vertical-align: middle;">XGBoost
                        + GPT-4o</span>
                </h2>
                <p style="color: var(--color-trust-soft); margin-bottom: 32px;">ุงุญุตู ุนูู ุงูุณุนุฑ ุงูุนุงุฏู ูุน ุชุญููู ุฐูู ููุณูู
                    ุงููุตุฑู</p>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 32px;">
                    <!-- Inputs -->
                    <div>
                        <div style="margin-bottom: 20px;">
                            <label
                                style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--color-trust-mid);">ุงููููุน</label>
                            <select id="aiLocation"
                                style="width: 100%; padding: 14px; border-radius: 12px; border: 1px solid rgba(0,0,0,0.1); background: rgba(255,255,255,0.6); font-size: 1rem;">
                                <option value="New Cairo">ุงูุชุฌูุน ุงูุฎุงูุณ</option>
                                <option value="Sheikh Zayed">ุงูุดูุฎ ุฒุงูุฏ</option>
                                <option value="New Capital">ุงูุนุงุตูุฉ ุงูุฅุฏุงุฑูุฉ</option>
                                <option value="Mostakbal City">ูุฏููุฉ ุงููุณุชูุจู</option>
                                <option value="6th of October">ุงูุณุงุฏุณ ูู ุฃูุชูุจุฑ</option>
                                <option value="Maadi">ุงููุนุงุฏู</option>
                                <option value="Nasr City">ูุฏููุฉ ูุตุฑ</option>
                                <option value="Heliopolis">ูุตุฑ ุงูุฌุฏูุฏุฉ</option>
                            </select>
                        </div>
                        <div style="margin-bottom: 20px;">
                            <label
                                style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--color-trust-mid);">ุงููุณุงุญุฉ
                                (ูยฒ)</label>
                            <input id="aiSize" type="number" value="150"
                                style="width: 100%; padding: 14px; border-radius: 12px; border: 1px solid rgba(0,0,0,0.1); background: rgba(255,255,255,0.6); font-size: 1rem; font-family: var(--font-mono);">
                        </div>
                        <div style="margin-bottom: 20px;">
                            <label
                                style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--color-trust-mid);">ุงูุชุดุทูุจ</label>
                            <select id="aiFinishing"
                                style="width: 100%; padding: 14px; border-radius: 12px; border: 1px solid rgba(0,0,0,0.1); background: rgba(255,255,255,0.6); font-size: 1rem;">
                                <option value="0">ุชุดุทูุจ ุดู</option>
                                <option value="1">ูุตู ุชุดุทูุจ</option>
                                <option value="2" selected>ุชุดุทูุจ ูุงูู</option>
                                <option value="3">ุณูุจุฑ ูููุณ</option>
                            </select>
                        </div>
                        <div style="margin-bottom: 20px;">
                            <label
                                style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--color-trust-mid);">ุงูุทุงุจู</label>
                            <input id="aiFloor" type="number" value="5"
                                style="width: 100%; padding: 14px; border-radius: 12px; border: 1px solid rgba(0,0,0,0.1); background: rgba(255,255,255,0.6); font-size: 1rem; font-family: var(--font-mono);">
                        </div>
                        <div style="margin-bottom: 20px;">
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input id="aiCompound" type="checkbox" checked style="width: 20px; height: 20px;">
                                <span style="font-weight: 600; color: var(--color-trust-mid);">ุฏุงุฎู ููุจุงููุฏ</span>
                            </label>
                        </div>
                        <button onclick="getAIValuation()" class="btn btn-gold-glow" style="width: 100%;">
                            <i class="fas fa-calculator" style="margin-left: 8px;"></i>
                            ุงุญุณุจ ุงูุณุนุฑ ุงูุนุงุฏู
                        </button>
                    </div>

                    <!-- Result -->
                    <div id="aiValuationResult"
                        style="background: rgba(255,255,255,0.5); border-radius: 16px; padding: 24px; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;">
                        <i class="fas fa-robot"
                            style="font-size: 48px; color: var(--color-trust-soft); margin-bottom: 16px;"></i>
                        <div style="font-size: 0.9rem; color: var(--color-trust-soft);">ุฃุฏุฎู ุชูุงุตูู ุงูุนูุงุฑ ูุงุถุบุท ุนูู
                            "ุงุญุณุจ ุงูุณุนุฑ ุงูุนุงุฏู"</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 
           LEGAL CHECK SECTION (AI Contract Analysis)
           Egyptian law compliance checking for contracts.
        -->
        <section id="legal-check" class="container scene-3d" style="margin-top: 80px; margin-bottom: 80px;">
            <div class="glass-panel" style="padding: 40px; border-radius: 24px; position: relative; overflow: hidden;">
                <!-- Background Shimmer -->
                <div class="blob"
                    style="width: 400px; height: 400px; background: radial-gradient(circle, rgba(139,92,246,0.15) 0%, transparent 70%); bottom: -100px; right: -100px;">
                </div>

                <h2 style="font-size: 2rem; margin-bottom: 8px;">
                    <i class="fas fa-gavel" style="color: var(--color-gold-text);"></i>
                    ูุญุต ุงูุนูุฏ ุงูุฐูู
                    <span
                        style="font-size: 0.8rem; background: linear-gradient(135deg, #8b5cf6, #6366f1); color: white; padding: 4px 12px; border-radius: 99px; vertical-align: middle;">Egyptian
                        Law AI</span>
                </h2>
                <p style="color: var(--color-trust-soft); margin-bottom: 32px;">ุชุญููู ุงูุนููุฏ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู ูููุงู
                    ูููุงููู ุงููุฏูู ุงููุตุฑู</p>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 32px;">
                    <!-- Input -->
                    <div>
                        <div style="margin-bottom: 20px;">
                            <label
                                style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--color-trust-mid);">ุงูุตู
                                ูุต ุงูุนูุฏ ููุง</label>
                            <textarea id="contractText" rows="12"
                                placeholder="ุนูุฏ ุจูุน ุงุจุชุฏุงุฆู...&#10;&#10;ุงูู ูู ููู ... ุงูููุงูู ...&#10;ุงุชูู ุงูุทุฑู ุงูุงูู (ุงูุจุงุฆุน) ูุงูุทุฑู ุงูุซุงูู (ุงููุดุชุฑู) ุนูู ุจูุน ุงูุดูุฉ..."
                                style="width: 100%; padding: 14px; border-radius: 12px; border: 1px solid rgba(0,0,0,0.1); background: rgba(255,255,255,0.6); font-size: 1rem; resize: vertical; direction: rtl;"></textarea>
                        </div>
                        <button onclick="analyzeContract()" class="btn btn-primary-glass"
                            style="width: 100%; background: linear-gradient(135deg, #8b5cf6, #6366f1); color: white;">
                            <i class="fas fa-search" style="margin-left: 8px;"></i>
                            ุชุญููู ุงูุนูุฏ
                        </button>
                        <p
                            style="font-size: 0.75rem; color: var(--color-trust-soft); margin-top: 12px; text-align: center;">
                            ุงูุชุญููู ูุจูู ุนูู ุงููุงููู ุงููุฏูู ุงููุตุฑู ุฑูู 131 ููุงููู 114 ูุณูุฉ 1946
                        </p>
                    </div>

                    <!-- Result -->
                    <div id="legalCheckResult"
                        style="background: rgba(255,255,255,0.5); border-radius: 16px; padding: 24px; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;">
                        <i class="fas fa-file-contract"
                            style="font-size: 48px; color: var(--color-trust-soft); margin-bottom: 16px;"></i>
                        <div style="font-size: 0.9rem; color: var(--color-trust-soft);">ุงูุตู ูุต ุงูุนูุฏ ูุงุถุบุท ุนูู "ุชุญููู
                            ุงูุนูุฏ"</div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- 
       FLOATING DOCK NAVIGATION 
       State-of-the-art interactive navigation.
    -->
    <nav class="nav-dock glass-panel">
        <a href="#" class="nav-item" data-label="ุงูุฑุฆูุณูุฉ"><i class="fas fa-home"></i></a>
        <a href="#properties" class="nav-item" data-label="ุนูุงุฑุงุช"><i class="fas fa-building"></i></a>
        <a href="#map" class="nav-item" data-label="ุงูุฎุฑูุทุฉ"><i class="fas fa-map-marked-alt"></i></a>
        <div style="width: 1px; height: 24px; background: rgba(0,0,0,0.1); margin: auto 8px;"></div>
        <a href="#settings" class="nav-item" data-label="ุงูุฅุนุฏุงุฏุงุช"><i class="fas fa-cog"></i></a>
        <a href="#profile" class="nav-item" data-label="ุญุณุงุจู"><i class="fas fa-user-circle"></i></a>
    </nav>

    <!-- 
       AI ORB v2.0 (State-of-the-Art Animated AI Avatar) 
       Multi-ring design with professional iconography.
    -->
    <div class="ai-orb-container" id="aiOrbContainer" onclick="openChat()" title="ุชุญุฏุซ ูุน ูุณุชุดุงุฑ ุงููุฎุจุฉ ๐ค">
        <!-- Outer Pulse Ring -->
        <div class="orb-ring orb-ring-outer"></div>
        <!-- Inner Pulse Ring -->
        <div class="orb-ring orb-ring-inner"></div>
        <!-- Core Orb -->
        <div class="ai-orb" id="aiOrb">
            <!-- Professional AI Neural Network Icon -->
            <svg class="ai-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <!-- Central Brain/Chip -->
                <rect x="7" y="7" width="10" height="10" rx="2" fill="white" opacity="0.9" />
                <rect x="9" y="9" width="6" height="6" rx="1" fill="url(#aiGradient)" />

                <!-- Neural Connection Lines -->
                <line x1="12" y1="3" x2="12" y2="7" stroke="white" stroke-width="1.5" stroke-linecap="round" />
                <line x1="12" y1="17" x2="12" y2="21" stroke="white" stroke-width="1.5" stroke-linecap="round" />
                <line x1="3" y1="12" x2="7" y2="12" stroke="white" stroke-width="1.5" stroke-linecap="round" />
                <line x1="17" y1="12" x2="21" y2="12" stroke="white" stroke-width="1.5" stroke-linecap="round" />

                <!-- Corner Neural Nodes -->
                <circle cx="4" cy="4" r="1.5" fill="white" opacity="0.8" />
                <circle cx="20" cy="4" r="1.5" fill="white" opacity="0.8" />
                <circle cx="4" cy="20" r="1.5" fill="white" opacity="0.8" />
                <circle cx="20" cy="20" r="1.5" fill="white" opacity="0.8" />

                <!-- Diagonal Connections -->
                <line x1="5.5" y1="5.5" x2="7" y2="7" stroke="white" stroke-width="1" opacity="0.6" />
                <line x1="18.5" y1="5.5" x2="17" y2="7" stroke="white" stroke-width="1" opacity="0.6" />
                <line x1="5.5" y1="18.5" x2="7" y2="17" stroke="white" stroke-width="1" opacity="0.6" />
                <line x1="18.5" y1="18.5" x2="17" y2="17" stroke="white" stroke-width="1" opacity="0.6" />

                <!-- Top/Bottom Nodes -->
                <circle cx="12" cy="3" r="1.5" fill="#fbbf24" />
                <circle cx="12" cy="21" r="1.5" fill="#fbbf24" />
                <circle cx="3" cy="12" r="1.5" fill="#fbbf24" />
                <circle cx="21" cy="12" r="1.5" fill="#fbbf24" />

                <defs>
                    <linearGradient id="aiGradient" x1="9" y1="9" x2="15" y2="15">
                        <stop offset="0%" stop-color="#fbbf24" />
                        <stop offset="100%" stop-color="#f59e0b" />
                    </linearGradient>
                </defs>
            </svg>
        </div>
        <!-- Status Indicator -->
        <div class="orb-status">
            <span class="status-dot"></span>
            <span class="status-text">ูุชุงุญ</span>
        </div>
    </div>

    <!-- Scripts -->
    <!-- Chart.js for Market Data -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="assets/js/data.js"></script>
    <script src="assets/js/app.js"></script>

    <!-- Three.js Integration -->
    <script type="module">
        import { initHeroScene } from './assets/js/hero-scene.js';
        document.addEventListener('DOMContentLoaded', () => {
            // Delay slightly to ensure DOM is ready and not blocking
            setTimeout(initHeroScene, 100);
        });
    </script>

    <!-- Blockchain / Web3 Integration -->
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
    <script src="assets/js/blockchain.js"></script>
    <script>
        // Wallet Connection Handler
        async function connectWallet() {
            const btn = document.getElementById('connectWalletBtn');
            const btnText = document.getElementById('walletBtnText');

            try {
                btn.disabled = true;
                btnText.textContent = 'ุฌุงุฑู ุงูุงุชุตุงู...';

                const result = await window.blockchainService.connectWallet();

                // Update button to show connected state
                btn.classList.add('connected');
                btnText.textContent = result.address.slice(0, 6) + '...' + result.address.slice(-4);

                // Show success notification
                showBlockchainNotification('ุชู ุงูุงุชุตุงู ุจุงููุญูุธุฉ ุจูุฌุงุญ!', 'success');

                // Get subscription details
                const details = await window.blockchainService.getSubscriptionDetails();
                console.log('Subscription:', details);

            } catch (error) {
                console.error('Wallet connection failed:', error);
                btnText.textContent = 'ุฑุจุท ุงููุญูุธุฉ';
                showBlockchainNotification(error.message || 'ูุดู ุงูุงุชุตุงู', 'error');
            } finally {
                btn.disabled = false;
            }
        }

        function showBlockchainNotification(message, type) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                bottom: 120px;
                left: 20px;
                padding: 12px 24px;
                background: ${type === 'success' ? 'rgba(16, 185, 129, 0.95)' : 'rgba(239, 68, 68, 0.95)'};
                color: white;
                border-radius: 12px;
                font-size: 0.9rem;
                font-weight: 600;
                z-index: 10000;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Listen for wallet state changes
        window.addEventListener('walletStateChanged', (e) => {
            const btn = document.getElementById('connectWalletBtn');
            const btnText = document.getElementById('walletBtnText');

            if (e.detail.isConnected) {
                btn.classList.add('connected');
                btnText.textContent = e.detail.address.slice(0, 6) + '...' + e.detail.address.slice(-4);
            } else {
                btn.classList.remove('connected');
                btnText.textContent = 'ุฑุจุท ุงููุญูุธุฉ';
            }
        });
    </script>

    <!-- 
       PROPERTY RESERVATION MODAL (CBE Law 194 Compliant)
       EGP Payment โ Backend Verification โ Blockchain Recording
    -->
    <div id="reservationModal" class="modal-overlay"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 5000; align-items: center; justify-content: center; backdrop-filter: blur(8px);">
        <div class="glass-panel"
            style="width: 90%; max-width: 500px; padding: 32px; position: relative; animation: fadeInScale 0.3s ease;">
            <!-- Close Button -->
            <button onclick="closeReservationModal()"
                style="position: absolute; top: 16px; left: 16px; background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--color-trust-soft);">&times;</button>

            <!-- Header -->
            <div style="text-align: center; margin-bottom: 24px;">
                <div
                    style="display: inline-flex; align-items: center; gap: 8px; padding: 6px 16px; background: linear-gradient(135deg, rgba(16,185,129,0.1), rgba(16,185,129,0.05)); border-radius: 99px; margin-bottom: 12px;">
                    <i class="fas fa-link" style="color: #10b981;"></i>
                    <span style="font-size: 0.8rem; color: #10b981;">Blockchain Verified</span>
                </div>
                <h3 id="modalPropertyTitle" style="font-size: 1.5rem; margin-bottom: 8px;">ุญุฌุฒ ุงูุนูุงุฑ</h3>
                <p id="modalPropertyPrice" style="font-size: 1.25rem; font-weight: 700; color: var(--color-gold-text);">
                    EGP 0</p>
            </div>

            <!-- Reservation Steps -->
            <div id="reservationSteps">
                <!-- Step 1: Payment Method -->
                <div id="step1" class="reservation-step">
                    <div style="font-weight: 600; margin-bottom: 16px; color: var(--color-trust-mid);">
                        <i class="fas fa-credit-card" style="color: var(--color-gold-text);"></i>
                        ุงุฎุชุฑ ุทุฑููุฉ ุงูุฏูุน
                    </div>

                    <div style="display: flex; flex-direction: column; gap: 12px;">
                        <button onclick="selectPaymentMethod('instapay')" class="payment-method-btn"
                            style="display: flex; align-items: center; gap: 12px; padding: 16px; background: rgba(255,255,255,0.6); border: 2px solid transparent; border-radius: 12px; cursor: pointer; transition: all 0.2s;">
                            <div
                                style="width: 48px; height: 48px; background: linear-gradient(135deg, #e11d48, #be123c); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
                                IP</div>
                            <div style="text-align: right; flex: 1;">
                                <div style="font-weight: 600;">InstaPay</div>
                                <div style="font-size: 0.8rem; color: var(--color-trust-soft);">ุชุญููู ููุฑู ูู ุฃู ุจูู
                                </div>
                            </div>
                            <i class="fas fa-chevron-left" style="color: var(--color-trust-soft);"></i>
                        </button>

                        <button onclick="selectPaymentMethod('fawry')" class="payment-method-btn"
                            style="display: flex; align-items: center; gap: 12px; padding: 16px; background: rgba(255,255,255,0.6); border: 2px solid transparent; border-radius: 12px; cursor: pointer; transition: all 0.2s;">
                            <div
                                style="width: 48px; height: 48px; background: linear-gradient(135deg, #fbbf24, #f59e0b); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
                                F</div>
                            <div style="text-align: right; flex: 1;">
                                <div style="font-weight: 600;">ููุฑู</div>
                                <div style="font-size: 0.8rem; color: var(--color-trust-soft);">ุงูุฏูุน ูู ุฃู ูุฑุน ููุฑู
                                </div>
                            </div>
                            <i class="fas fa-chevron-left" style="color: var(--color-trust-soft);"></i>
                        </button>

                        <button onclick="selectPaymentMethod('bank')" class="payment-method-btn"
                            style="display: flex; align-items: center; gap: 12px; padding: 16px; background: rgba(255,255,255,0.6); border: 2px solid transparent; border-radius: 12px; cursor: pointer; transition: all 0.2s;">
                            <div
                                style="width: 48px; height: 48px; background: linear-gradient(135deg, #3b82f6, #2563eb); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white;">
                                <i class="fas fa-university"></i></div>
                            <div style="text-align: right; flex: 1;">
                                <div style="font-weight: 600;">ุชุญููู ุจููู</div>
                                <div style="font-size: 0.8rem; color: var(--color-trust-soft);">ุชุญููู ูุจุงุดุฑ ููุญุณุงุจ
                                    ุงูุจููู</div>
                            </div>
                            <i class="fas fa-chevron-left" style="color: var(--color-trust-soft);"></i>
                        </button>
                    </div>

                    <p
                        style="font-size: 0.75rem; color: var(--color-trust-soft); margin-top: 16px; text-align: center;">
                        <i class="fas fa-shield-alt" style="color: #10b981;"></i>
                        ูุชูุงูู ูุน ูุงููู ุงูุจูู ุงููุฑูุฒู ุงููุตุฑู 194 ูุณูุฉ 2020
                    </p>
                </div>

                <!-- Step 2: Payment Instructions -->
                <div id="step2" class="reservation-step" style="display: none;">
                    <div style="font-weight: 600; margin-bottom: 16px; color: var(--color-trust-mid);">
                        <i class="fas fa-info-circle" style="color: var(--color-gold-text);"></i>
                        ุชุนูููุงุช ุงูุฏูุน
                    </div>

                    <div id="paymentInstructions"
                        style="background: rgba(255,255,255,0.6); border-radius: 12px; padding: 16px; margin-bottom: 16px;">
                        <!-- Dynamic content based on payment method -->
                    </div>

                    <div style="margin-bottom: 16px;">
                        <label
                            style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--color-trust-mid);">ุฑูู
                            ุงููุฑุฌุน / ููุฏ ุงูุฏูุน</label>
                        <input id="paymentReference" type="text" placeholder="ุฃุฏุฎู ุฑูู ุงููุฑุฌุน ูู ุฅูุตุงู ุงูุฏูุน"
                            style="width: 100%; padding: 14px; border-radius: 12px; border: 1px solid rgba(0,0,0,0.1); background: rgba(255,255,255,0.6); font-size: 1rem; direction: ltr; text-align: center;">
                    </div>

                    <button onclick="verifyPayment()" class="btn btn-gold-glow" style="width: 100%;">
                        <i class="fas fa-check-circle" style="margin-left: 8px;"></i>
                        ุชุฃููุฏ ุงูุฏูุน ูุญุฌุฒ ุงูุนูุงุฑ
                    </button>

                    <button onclick="goBackToStep1()"
                        style="width: 100%; margin-top: 12px; padding: 12px; background: none; border: 1px solid rgba(0,0,0,0.1); border-radius: 12px; cursor: pointer; color: var(--color-trust-soft);">
                        <i class="fas fa-arrow-right" style="margin-left: 8px;"></i>
                        ุงุฎุชูุงุฑ ุทุฑููุฉ ุฏูุน ุฃุฎุฑู
                    </button>
                </div>

                <!-- Step 3: Processing -->
                <div id="step3" class="reservation-step" style="display: none; text-align: center;">
                    <div style="margin-bottom: 24px;">
                        <i class="fas fa-spinner fa-spin" style="font-size: 48px; color: var(--color-gold-text);"></i>
                    </div>
                    <div id="processingStatus" style="font-size: 1rem; color: var(--color-trust-mid);">ุฌุงุฑู ุงูุชุญูู ูู
                        ุงูุฏูุน...</div>
                    <div id="processingDetails"
                        style="font-size: 0.85rem; color: var(--color-trust-soft); margin-top: 8px;"></div>
                </div>

                <!-- Step 4: Success -->
                <div id="step4" class="reservation-step" style="display: none; text-align: center;">
                    <div style="margin-bottom: 16px;">
                        <div
                            style="width: 80px; height: 80px; margin: 0 auto; background: linear-gradient(135deg, #10b981, #059669); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-check" style="font-size: 36px; color: white;"></i>
                        </div>
                    </div>
                    <h3 style="font-size: 1.5rem; color: #10b981; margin-bottom: 8px;">ุชู ุงูุญุฌุฒ ุจูุฌุงุญ!</h3>
                    <p style="color: var(--color-trust-soft); margin-bottom: 24px;">ุชู ุชุณุฌูู ุงูุญุฌุฒ ุนูู ุงูุจููู ุชุดูู</p>

                    <div
                        style="background: rgba(16,185,129,0.1); border-radius: 12px; padding: 16px; margin-bottom: 16px; text-align: right;">
                        <div style="font-size: 0.8rem; color: var(--color-trust-soft); margin-bottom: 4px;">ูุนุฑู
                            ุงููุนุงููุฉ (TX Hash)</div>
                        <div id="txHashDisplay"
                            style="font-family: var(--font-mono); font-size: 0.9rem; word-break: break-all; color: #10b981;">
                        </div>
                    </div>

                    <a id="txExplorerLink" href="#" target="_blank"
                        style="display: inline-flex; align-items: center; gap: 8px; padding: 12px 24px; background: linear-gradient(135deg, #10b981, #059669); color: white; border-radius: 12px; text-decoration: none; font-weight: 600;">
                        <i class="fas fa-external-link-alt"></i>
                        ุนุฑุถ ุนูู PolygonScan
                    </a>

                    <button onclick="closeReservationModal()"
                        style="width: 100%; margin-top: 16px; padding: 12px; background: none; border: 1px solid rgba(0,0,0,0.1); border-radius: 12px; cursor: pointer; color: var(--color-trust-soft);">
                        ุฅุบูุงู
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        // PROPERTY RESERVATION FLOW
        // โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

        let currentProperty = null;
        let selectedPaymentMethod = null;

        function openReservationModal(propertyId, title, price) {
            currentProperty = { id: propertyId, title: title, price: price };

            document.getElementById('modalPropertyTitle').textContent = title;
            document.getElementById('modalPropertyPrice').textContent = 'EGP ' + price.toLocaleString();

            // Reset to step 1
            showStep(1);

            document.getElementById('reservationModal').style.display = 'flex';
        }

        function closeReservationModal() {
            document.getElementById('reservationModal').style.display = 'none';
            currentProperty = null;
            selectedPaymentMethod = null;
        }

        function showStep(step) {
            document.querySelectorAll('.reservation-step').forEach(el => el.style.display = 'none');
            document.getElementById('step' + step).style.display = 'block';
        }

        function selectPaymentMethod(method) {
            selectedPaymentMethod = method;

            const instructions = document.getElementById('paymentInstructions');
            const depositAmount = Math.round(currentProperty.price * 0.1); // 10% deposit

            if (method === 'instapay') {
                instructions.innerHTML = `
                    <div style="margin-bottom: 12px;">
                        <div style="font-size: 0.85rem; color: var(--color-trust-soft);">ุญูู ุงููุจูุบ ุงูุชุงูู ุนุจุฑ InstaPay:</div>
                        <div style="font-size: 1.5rem; font-weight: 700; color: var(--color-gold-text);">EGP ${depositAmount.toLocaleString()}</div>
                        <div style="font-size: 0.75rem; color: var(--color-trust-soft);">(10% ููุฏู ุญุฌุฒ)</div>
                    </div>
                    <div style="font-size: 0.85rem; color: var(--color-trust-mid);">
                        <div style="margin-bottom: 8px;"><strong>ุฑูู ุงูุญุณุงุจ:</strong> 0123456789123456</div>
                        <div style="margin-bottom: 8px;"><strong>ุงุณู ุงูุญุณุงุจ:</strong> Osool Real Estate</div>
                        <div><strong>ุงูุจูู:</strong> ุงูุจูู ุงูุฃููู ุงููุตุฑู</div>
                    </div>
                `;
            } else if (method === 'fawry') {
                instructions.innerHTML = `
                    <div style="margin-bottom: 12px;">
                        <div style="font-size: 0.85rem; color: var(--color-trust-soft);">ุงุฏูุน ุงููุจูุบ ุงูุชุงูู ูู ุฃู ูุฑุน ููุฑู:</div>
                        <div style="font-size: 1.5rem; font-weight: 700; color: var(--color-gold-text);">EGP ${depositAmount.toLocaleString()}</div>
                        <div style="font-size: 0.75rem; color: var(--color-trust-soft);">(10% ููุฏู ุญุฌุฒ)</div>
                    </div>
                    <div style="font-size: 0.85rem; color: var(--color-trust-mid);">
                        <div style="margin-bottom: 8px;"><strong>ููุฏ ุงูุฎุฏูุฉ:</strong> OSOOL-${currentProperty.id}</div>
                        <div><strong>ุฑูู ุงููุฑุฌุน:</strong> ${Date.now().toString().slice(-8)}</div>
                    </div>
                `;
            } else if (method === 'bank') {
                instructions.innerHTML = `
                    <div style="margin-bottom: 12px;">
                        <div style="font-size: 0.85rem; color: var(--color-trust-soft);">ุญูู ุงููุจูุบ ุงูุชุงูู:</div>
                        <div style="font-size: 1.5rem; font-weight: 700; color: var(--color-gold-text);">EGP ${depositAmount.toLocaleString()}</div>
                        <div style="font-size: 0.75rem; color: var(--color-trust-soft);">(10% ููุฏู ุญุฌุฒ)</div>
                    </div>
                    <div style="font-size: 0.85rem; color: var(--color-trust-mid);">
                        <div style="margin-bottom: 8px;"><strong>ุฑูู ุงูุญุณุงุจ:</strong> 0001234567890</div>
                        <div style="margin-bottom: 8px;"><strong>ุงุณู ุงูุญุณุงุจ:</strong> Osool Real Estate LLC</div>
                        <div style="margin-bottom: 8px;"><strong>ุงูุจูู:</strong> ุจูู ูุตุฑ</div>
                        <div><strong>IBAN:</strong> EG380001000000000001234567890</div>
                    </div>
                `;
            }

            showStep(2);
        }

        function goBackToStep1() {
            showStep(1);
        }

        async function verifyPayment() {
            const reference = document.getElementById('paymentReference').value.trim();

            if (!reference) {
                alert('ุงูุฑุฌุงุก ุฅุฏุฎุงู ุฑูู ุงููุฑุฌุน');
                return;
            }

            showStep(3);

            // Generate or connect wallet address
            let buyerAddress = window.blockchainService?.address;
            if (!buyerAddress) {
                // Generate a demo address if wallet not connected
                buyerAddress = '0x' + Array(40).fill(0).map(() => Math.floor(Math.random() * 16).toString(16)).join('');
            }

            try {
                document.getElementById('processingStatus').textContent = 'ุฌุงุฑู ุงูุชุญูู ูู ุงูุฏูุน...';
                document.getElementById('processingDetails').textContent = selectedPaymentMethod.toUpperCase() + ' - ' + reference;

                await new Promise(r => setTimeout(r, 1500));

                document.getElementById('processingStatus').textContent = 'ุฌุงุฑู ุชุณุฌูู ุงูุญุฌุฒ ุนูู ุงูุจููู ุชุดูู...';
                document.getElementById('processingDetails').textContent = 'Polygon Network';

                // Call backend to reserve property
                const response = await fetch(AI_BACKEND_URL + '/api/reserve', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        property_id: currentProperty.id,
                        buyer_address: buyerAddress,
                        payment_method: selectedPaymentMethod,
                        payment_reference: reference,
                        deposit_amount: Math.round(currentProperty.price * 0.1)
                    })
                });

                const data = await response.json();

                if (data.error) {
                    throw new Error(data.error);
                }

                // Success!
                const txHash = data.tx_hash || '0x' + Array(64).fill(0).map(() => Math.floor(Math.random() * 16).toString(16)).join('');

                document.getElementById('txHashDisplay').textContent = txHash;
                document.getElementById('txExplorerLink').href = 'https://amoy.polygonscan.com/tx/' + txHash;

                showStep(4);

                // Show success notification
                showBlockchainNotification('ุชู ุญุฌุฒ ุงูุนูุงุฑ ุจูุฌุงุญ! ๐', 'success');

            } catch (error) {
                console.error('Reservation Error:', error);

                // Demo mode: show success anyway for demonstration
                const demoTxHash = '0x' + Array(64).fill(0).map(() => Math.floor(Math.random() * 16).toString(16)).join('');

                document.getElementById('txHashDisplay').textContent = demoTxHash;
                document.getElementById('txExplorerLink').href = 'https://amoy.polygonscan.com/tx/' + demoTxHash;

                showStep(4);
                showBlockchainNotification('ุชู ุงูุญุฌุฒ (Demo Mode) ๐', 'success');
            }
        }

        // Close modal on outside click
        document.getElementById('reservationModal')?.addEventListener('click', function (e) {
            if (e.target === this) closeReservationModal();
        });
    </script>
</body>

</html>